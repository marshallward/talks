<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>
      Pursuing Peak Performance in Pelagic Predictions
    </title>

    <meta name="description" content="TODO">
    <meta name="author" content="Marshall Ward">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">
    <!--<link rel="stylesheet" href="lib/css/solarized_dark.css"> -->

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ?
                  'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal"
         style="background: url(figures/nci/bg_nci.png);
                background-size: cover;">

      <header style="width: 10%; position: absolute; top: 2%; left: 2%;">
        <img src="figures/nci/nci_logo_small.png">
      </header>

      <footer style="font-size: 1pc; position: absolute; bottom: 2%; left: 2%;">
        <code>http://marshallward.org/talks/cosima2017.html</code>
      </footer>

      <div class="slides">

        <!-- title -->

        <section>
          <div class="reveal" style="text-align: right;">
            <img src="figures/nci/nci_logo.png"
                 style="background: none; border: none; box-shadow: none;
                 width: 30%"
                 alt="NCI">
          </div>

          <h3 style="text-align: left; color: white;">
            Pursuing Peak Performance in Pelagic Predictions
          </h3>

          <p style="text-align: right;">Marshall Ward
            <br>National Computational Infrastructure
          </p>

          <img src="figures/nci/partner_logos.svg" style="background: white">
        </section>

        <!-- content -->

        <section>
          <h3>What is Peak Performance?</h3>
          <p>
            $$R_\text{peak} = N_\text{CPU} \times \left( f \times N_\text{SIMD}
                              \times N_\text{vec} \right)$$
          </p>
          <ul>
            <li>$N_\text{CPU}$ : Number of CPU cores</li>
            <li>$f$ : CPU frequency (cycles per second)</li>
            <li>$N_\text{vec}$ : FLOPs per instruction
            <li>$N_\text{ins}$ : Instructions per cycle</li>
          </ul>
        </section>

        <section>
          <h3>Dennard scaling breakdown</h3>
          <img src="figures/computing/clockspeed.svg"
                  style="width:45%; float: left"
                  alt="CPU Clock speed vs Time">
          <ul style="width: 50%">
            <li>$P \propto f$ (physics)</li>
            <li>$P \propto A$ (Dennard)</li>
            <li>Lower $A$, raise $f$
            <li>$P$ stays constant...</li>
            <li>... until $P \gg A$</li>
          </ul>
          <div style="clear: both;">
            <p style="font-size:20px">
            From <a href="http://cpudb.stanford.edu/">CPU DB</a><br>
            (Andrew Danowitz, Kyle Kelley, James Mao, John P. Stevenson, and Mark Horowitz. 2012. CPU DB: recording microprocessor history. Commun. ACM 55, 4 (April 2012), 55-63.)
            </p>
          </div>
        </section>

        <section>
          <h3>Supercomputer $R_\text{peak}$</h3>
          <p><img src="figures/computing/top500_rpeak_crop.png"
                  style="width:50%"></p>
          <p><a href="http://top500.org/statistics/perfdevel/">http://top500.org/statistics/perfdevel/</a>
          </p>
        </section>

        <section>
          <p>MOM 5 vectorisation<p>
          <table class="reveal">
            <thead>
              <th class="head">Subroutine</th>
              <th class="head">FLOPs</th>
              <th class="head">% vector</th>
            </thead>
            <tbody>
              <tr>
                <td>MAIN</td>
                <td>2.04e+10</td>
                <td>88.1</td>
              </tr>
              <tr>
                <td>update_ocean_model</td>
                <td>1.87e+10</td>
                <td>91.0</td>
              </tr>
              <tr>
                <td>update_ocean_tracer</td>
                <td>8.40e+09</td>
                <td>92.9</td>
              </tr>
              <tr>
                <td>vert_mix_coeff</td>
                <td>2.04e+09</td>
                <td>80.9</td>
              </tr>
              <tr>
                <td>ocean_explicit_accel_a</td>
                <td>1.95e+09</td>
                <td>92.8</td>
              </tr>
              <tr>
                <td>update_ocean_barotropic</td>
                <td>1.80e+09</td>
                <td>94.5</td>
              </tr>
              <!--
              <tr>
                <td>submeso_restrat</td>
                <td>1.73e+09</td>
                <td>0.884</td>
              </tr>
              -->
              <tr>
                <td>ocean_eta_smooth</td>
                <td>1.78e+07</td>
                <td>87.5</td>
              </tr>
              <tr>
                <td>update_ice_model_slow_dn</td>
                <td>7.48e+08</td>
                <td>83.2</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
        </section>

        <!-- configuration -->

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
          Reveal.initialize({
            slideNumber: true,
            dependencies: [
              { src: 'plugin/highlight/highlight.js',
                async: true,
                condition: function() {
                  return !!document.querySelector( 'pre code' ); },
                callback: function() {
                  hljs.initHighlightingOnLoad(); }
              },

              { src: 'plugin/math/math.js', async: true }
            ]
          });
        </script>
      </div>
    </div>
</html>
